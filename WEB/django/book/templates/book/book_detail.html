{% extends 'base.html' %}

{% block contents %}
  <form action="" method='post'>
    {% csrf_token %}

    <div class="form-group mb-3">
      <label for="code">Code</label>
      <input type="text" name='code' id='code' class='form-control' value='{{detail.code}}' readonly='readonly'>
    </div>
    <div class="form-group mb-3">
      <label for="author">Author</label>
      <input type="text" name='author' id='author' class='form-control' value='{{detail.author}}' readonly='readonly'>
    </div>
    <div class="form-group mb-3">
      <label for="title">Title</label>
      <input type="text" name='title' id='title' class='form-control' value='{{detail.title}}' readonly='readonly'>
    </div>
    <div class="form-group mb-3">
      <label for="price">Price</label>
      <input type="text" name='price' id='price' class='form-control' value='{{detail.price}}' readonly='readonly'>
    </div>
    <div class="form-group mb-3">
      <label for="register_dttm">Date</label>
      <input type="text" name='register_dttm' id='register_dttm' class='form-control' value='{{detail.register_dttm}}' readonly='readonly'>
    </div>

    <div class="form-group mb-3">
      {% if user.is_authenticated and user.is_superuser %}
        <button type="submit" class='btn btn-success'>수정</button>
      {% endif %}
      <button type="submit" class='btn btn-primary'>리스트</button>
    </div>
  </form>

{% endblock contents %}

{% block script %}

  <script>
    document
      .querySelector(".btn-primary")
      .addEventListener('click', (e) => {
        e.preventDefault(); // submit 기능 중지
        location.href = "{% url 'list' %}";
      });

    document
      .querySelector(".btn-success")
      .addEventListener('click', (e) => {
        e.preventDefault(); // submit 기능 중지
        location.href = "{% url 'update' pk=detail.pk %}";
      });
  </script>

{% endblock script %}